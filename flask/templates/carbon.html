<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'navbar-auth.html' %}

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Footprint Calculator</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Add custom styles here if needed */
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mt-5 mb-4">Carbon Footprint Calculator</h1>
        <h5 class="mt-5 mb-4">A carbon footprint measures the total greenhouse gases emitted from human activities, mainly carbon dioxide. Activities like using fossil fuels for energy, transportation, and food production contribute to carbon footprints. To reduce carbon footprints, it's important to use renewable energy, adopt sustainable transportation, and minimize waste.</h5>
        <form action="/carbon" method="post">
            <div class="form-group">
                <label for="shower_minutes">Minutes Spent in Shower:</label>
                <input type="number" class="form-control" id="shower_minutes" name="shower_minutes" required>
            </div>
            <div class="form-group">
                <label for="daily_driving_distance">Daily Driving Distance (minutes):</label>
                <input type="number" class="form-control" id="daily_driving_distance" name="daily_driving_distance" required>
            </div>
            <div class="form-group">
                <label for="meat_consumption">Meat Consumption (grams per day):</label>
                <input type="number" class="form-control" id="meat_consumption" name="meat_consumption" required>
            </div>
            <button type="submit" class="btn btn-primary">Calculate</button>
        </form>
        {% if total_carbon %}
            <h2 class="mt-5">Your Carbon Footprint</h2>
            <p>Total Carbon Footprint: {{ total_carbon }} grams CO2e</p>
            {% set progress_percentage = (total_carbon / 5000) * 100 %}
            <div class="progress">
                <div class="progress-bar bg-success" role="progressbar" style="width: {% if progress_percentage <= 33 %}{{ progress_percentage }}{% else %}33{% endif %}%;" aria-valuenow="{{ total_carbon }}" aria-valuemin="0" aria-valuemax="5000"></div>
                <div class="progress-bar bg-warning" role="progressbar" style="width: {% if progress_percentage > 33 and progress_percentage <= 66 %}{{ progress_percentage - 33 }}{% elif progress_percentage > 66 %}33{% endif %}%;" aria-valuenow="{{ total_carbon }}" aria-valuemin="0" aria-valuemax="5000"></div>
                <div class="progress-bar bg-danger" role="progressbar" style="width: {% if progress_percentage > 66 %}{{ progress_percentage - 66 }}{% else %}0{% endif %}%;" aria-valuenow="{{ total_carbon }}" aria-valuemin="0" aria-valuemax="5000"></div>
            </div>
        {% endif %}
    </div>
    <div class="container mt-5">
        <h3>Carbon Footprint Breakdown</h3>
        <canvas id="carbonBreakdownChart" width="400" height="400"></canvas>
    </div>
    <div class="container mt-5">
        <h3>Carbon Footprint Statistics and Facts</h3>
        <p>Carbon footprint is the total amount of greenhouse gases (including carbon dioxide and methane) that are generated by our actions. Here are some key statistics and facts:</p>
        <ul>
            <li>The transportation sector is one of the largest contributors to carbon emissions, with vehicles emitting significant amounts of CO2.</li>
            <li>Reducing shower time can help save water and energy, leading to a lower carbon footprint.</li>
            <li>Walking, biking, and using public transportation instead of driving can significantly reduce carbon emissions.</li>
            <li>Every individual's actions, from energy consumption to transportation choices, contribute to their carbon footprint.</li>
            <li>By making sustainable choices in our daily lives, we can collectively reduce carbon emissions and combat climate change.</li>
        </ul>
        <p>Calculate your carbon footprint regularly and explore ways to reduce it to contribute to a healthier planet!</p>
    </div>
    <!-- Bootstrap JS (optional) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // Get the total carbon footprint and calculate percentages for each category
        var totalCarbon = {{ total_carbon }};
        var showerCarbon = {{ shower_carbon }};
        var drivingCarbon = {{ driving_carbon }};
        var meatCarbon = {{ meat_carbon }};
        var totalPercentage = totalCarbon / 100;

        // Calculate percentages
        var showerPercentage = (showerCarbon / totalCarbon) * 100;
        var drivingPercentage = (drivingCarbon / totalCarbon) * 100;
        var meatPercentage = (meatCarbon / totalCarbon) * 100;

        var ctx = document.getElementById('carbonBreakdownChart').getContext('2d');
        var carbonBreakdownChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Shower', 'Driving', 'Meat Consumption'],
                datasets: [{
                    label: 'Carbon Breakdown',
                    data: [showerPercentage, drivingPercentage, meatPercentage],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.5)',
                        'rgba(54, 162, 235, 0.5)',
                        'rgba(255, 206, 86, 0.5)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    </script>
</body>
</html>
